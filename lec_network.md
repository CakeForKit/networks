# лек 1
Компьютерные сети
3 РК на лабе
5 вопрос - 15 мин

билет экз - дана топология (сеть) надо настроить без команд по адресам. 3 сервера (http dns получение/отправка почты/трассировка до стевера/скачивание страниц) и мин 2 маршрутизатора 
Надо рассортировать пакеты

Книги:
олифер оливер компьютерные сети
таненбаум компьютерные сети
одом офиц руководство по подготовке ICND1/2
сети для самых маленьких (ютуб и хабр)


Методы передачи данных:
Симплексный - однонаправленный
Полудуплексный
передача в обе стороны одновременно (интернет)

Соглашение между интерфейсами логического уровня (пример - язык)

Протоколы: байториентированные(указывает начало и конец передачи - а поседерине данные) и биториентированные (местоположение бита определяет функционал)

байториентированные проблемы:

прозрачная и непрозрачная передача данных

staft 
stuft

STR
**байт-stuft**
байт-стаффинг (byte stuffing) — механизм, при котором в потоке данных байты, совпадающие с управляющими кодами, подменяются другими последовательностями. 
otvet.mail.ru
Суть процесса: последовательность байтов данных, которые могут содержать «некорректные» или «зарезервированные» значения (например, разделитель кадров), преобразуется в потенциально более длинную последовательность, которая не содержит этих значений. 

Один из алгоритмов байт-стаффинга — COBS. Он позволяет эффективно, надёжно и однозначно формировать пакеты независимо от их содержания, что облегчает восстановление данных при сбоях в передаче

**бит-стаффикнг**
управляющая комбинация: 01111110

физическое кодирование - спрособ представления 1 и 0 спомощью уровня напряжения


Классификация сетей:
1. WAN (wicle area netw)  - совокупность LAN
2. LAN (local area netw)


топология сетей - способ соединения устройстм между собой
- граф вершины которого - сетевые устройства, а ребра - каналы связи

5 разновидностей топологии (все ост их производные)
1. Шина (конеыней устройства) - исторически первая появилась на основе коксиального кабеля. Логически это wifi - один канал передачи данных
2. Кольцо - очень защищенное. Минус - если развиваетс одна из связей (не устройство), то падает все кольцо
3. Звезда - самая распространенная. Центре промежуточное устройство к которому все подключатся. Плюс - если отключается связь, то отключается только его ветсь. 
4. Полносвязная (самая надежная). Смысл - 
5. частично связная
wifi - подключаемся в звезде а логика шины


Логическая (то как передаются данные) и физическая топология

## Дисциплина передачи данных
1. иерархическая (есть первичный и ост - вторичные)
2. одноранговая

иерархическая. 3 сценария передачи данных
1 - П передавет В
2 - В передает П (вторичный ждет когда П спросит (есть ли что то))
3 - В передает В (В передает П, П проверяет адрес, П передает В (другому))


одноранговая. В локальных сетях.
Каждый узел имеет право педать когд азахочет

Проблема - колиции (наложение двух сигналов друг на друга)

Решение проблемы CSMA/CD - технология

# лек 2 17.09.25
CSMA/CD - 


детерминированный метод - методология типа кольцо. Каждой станции выдается квант времени в течении кот разрешена передача

OSI/ISO - 7-уровневая модель
Работа в ОС:
7. Приложения
6. Представления - корректное отображение данных на получателе.
5. Сеансовый - открывает поддеживает и закрывает сеансы - отвечает за аутентификацию.
4. Транспортный (сегмент) - сегментация данных на источнике и реорганизация в поток на получателе. Открывает, поддерживает и корректно завершает соединения. Отвечает за надежную доставку - есть контрольная сумма + гарантированная доставка.
Доставка данных до железки:
3. Сетевой (пакет) - Поиск и выбор оптимального маршрута между сетями географически отдаленными друг от друга. Коммутаторы L3, 
2. Канальный (кадр) - первый ур, кот определяет формат данный для передачи. Отвечает за метод контроля доступа к физической среде. Отвечает за надежную доставку (за счет контрольной суммый - поле которое позволяет поймать ошибку - зафиксирует факт наличия ошибки). Мост и коммутатор L2. Мосты работают на програмной логике, коммутаторы работают на коммутаторной логике. Через коммутаторы проходит весь трафик - пользовательский и служеная информация.
1. Физический - механические, электрические, процедурные и функциональные характеристики соединения между устройствами. Скорость передачи данных, уровни напряжения/сопаротивления. Метод передачи данных (симплексный, дуплексный, полудуплексный). Хаб, услитель.


На каждом из ур формируется:
Заголовок | данные | хвостовик 
pdu на каждом уровне называется по своему


Деинкапсуляция


Модель DOT (TCP/IP) - на ней работает интернет а не на OSI
7-5 - Приложения (сообщение)
4 - Транспортный
3 - Сетевой
2-1 - Канальный

Меньше инкапсуляции и деинкапсуляции
pdu на прикладном уровне - сообщение

Стек это набор протоколов
Модель это уровни


Трехуровневая модель
Уровни:
Доступа - доступ к конечному пользователю и сегментацию по доменам колизияи (совокупность устройств)
Распределения - маршрутизация, качество обслуживания, политика безопасности (иногда агрегирование) L2 L3
Ядра - отказоустойчивый уровень - трафик абсолютно всех пользователей

Агрерирование (обьединение несоклких физических сигналов в один логический)


# Канальный уровень
Token ring
кольцевая тополия
не сай распространеннй
По кольу бегает pdu
В кольце выбирается специальный станция



# Лек 3 24.09.25
начальные ограничитель | управление доступом | конечный огрианичитель

байт стафинг
бит стафинг
сделать управляющуж комбинацию уникальной


Рассказали про манчестерский код
Для него ошибка это когда нет перепадов. Что то про служебный перепад

бит i - последний кадр в последовательности
бит e - наличие ошибки (флаг)


Упраление доступом - 

Маркер может захватить маркер только та станция у которой приоритет передачи больше чем у маркера

принцип детерменированного метода

биты резервного приоритета используюися для записи в очередь

в очерель может записать тольк та станция у которо приоритет данных для передачи >= резервному приоритету
(0-7)

бит m - бит монитор, выствляется активным монитором при создании pdu и при ретрансляции через себя. Сбивается любой др станцией модифицировавшей pdu. Выставляется при создании 

Бит T если выставлен - pdu является маркером, если сбит то кадр данных


Кольцо из 5 станций
M - кольцо активного монитора
1 - M создает пустой маркер (его приоритет равен p=0, M=1, T=1, R=0)
2 - А захватывает (P=1, M=0, T=0, R=0)
3- B не может захватить, т к это кадр данных (и ретранслирует дальше так как не является получателем)
(p=3,M=0, T=0, R=4)
4 - C видит свой адрес как получателя поэтому копирует данные. Ретранслирует дальше, так как кадр освобождает получатель. (p=3,M=0,T=0,R=5)
5 - D не участвует (p=4, M= 0, T=0, R=5)
6 M- (p=3, M=1, T=0, R=5)
7 A- p=5, M=0, T=1, R=0
D - p=5, M=0, T=1, R=4
C - p=5, M=0, T=0, R=4


Зачем бит M:
A передат С
но С отключиллся и данные не успели до  него дойти
Кадр дойдет до активного монитора
подом до А и ретранслирует т е M=1
До монитора дойдет кадр с  M=1 что занчит что получателя нет
этот кадр уничтожается


Резервный монитор - если активный отвалился

основные служебные кадрый

3й вид pdu - прерывающая последовательность
для очистки кольца

Когд актиный монитор отваливается (его ждут 7 секунд)


Как физически реализовывается кольцо
Фото
прямоугольнички эт оконцентраторы, 2хвидов:
пассивные - обходят выключенные станции
активные - еще  усиливают сигнал

FDDI, filer Distributed Data Interface
та же самая логика как у токе ринга
отличия - он оптический 
+ работает только по раннему освобожденияю маркера (поровозик бегает по кольцу)
+ более надежный за счет того что работает по 2м кольцам (есть резервное кольцо, если основное разрывается, то только обьединяются)
+ убрали априоритеты
+ остался асинхронный и синхронный  (для асинхронного трацика станция высчитывает время оборотка маркера по кольцу)



# Лек 4 1.10.25
Зачем нужны локальные сети
- совместное использование ресурсов
- совместное использование данных
- доступ в другие сети

4 группы компонентов
- сетевые устройства
- протоколы
- конечные устройства
- соединительные устройства



микросегментация

свитч в разрезе

интерфейся на свиче
номер интерфейса -  номер слота : номер конкретного интерфейса

табллица коммутации (номер интервейса - мак адрес устройства который весит на этом устройстве)

кадр ethernet2

19:13
DA 
SA 
Тип - код протокола которму необходимо передать содердимое поле данных (кому деинкапсулировать)
DATA
FCS - контрольная сумма

SOHO свичи (обьемм таблич комутации ~1000 записе1)
SMB - smal medium busness (до 64к)
ISP - провайдерские свичи

варианты коммутации
буферизация - в буфер попадает весь кадр, проверяется на коллицию и ошибки
без буферизации - в буфер попадает первые 6 байт (адрес назначение), не проверяет ни на колизию ни на  ошибки (самы не надежный но самый быстрый)
безфрагментное - в бефер первеы 64 байта проверка на коллизию но не на ошибки

функции 
- пересылки
- лавинная рассылка
(если не известно где назодится получаетель, то он отпраляет на интерфейс с которого получил)
- фильтрация (если кадр назначается тому же сегменту с которго пришел свитч его уничтожает)

фото тривиальное топологии
A B C - мак адреса устройст
на свиче нет ни одной записи
На свитч A  опраляется CA...

0/1 


Когда не знает куда отправлять - отпраляет по обеим

39.00 схема фото 2

А -> с
SW 1
0/2 A0

В  уничтожн

Приши на sw2
sw2
0/1 A0



Сетевой уровень

Адресаци. Ip адреса (4я и 6я версия)

Классовая адресация и безклассовая.

IPадрес состоит из

32-бита
192.165.1.2

классы ip-адресов

класс D как правило служебная рассылка
класс E - 1 ip

по значению первого актета определяется лкасс


192.168.1.0 - адрес сети
192.168.1.255 - широковезщательный адрес - только получатель
255.255.255.255 локальный широковещательный дарес, используется только когда надо отправить запрос на сервер и вы не знаете адрес своей сети
0.0.0.0 неопределенный адрес когда устройство только появляется в сети и у него нет ip
169.254.0.0 автоконфигурация 


# Лек 4 (8.10.25)

Классы ip адресов
A 10.0.0.0 
B 172.16.0.0 - 172.32.0.0
C 192.168.0.0 - 192.168.255.0

технология NAT (network adress translation) - в точке выхода на провайдера (от меня к провайдеру) подменяет адрес устройста. Пожтому никто не видит что ip одинаковые в локалькой сети. Это в ПО роутера.

3 типа:
- статический (человек сам прописывает адреса). Используется когда в локалке есть устройство на которые хотим лазять извне. (например сервер которы йне должен менять ip)
- динамический (записываем пул публичных адресов, которые будум раздавать пул устройства + политика безовасности, кото можно преобразовывать а кого не)
- PAT (port adress translation) - перегруженный (за одним публичным ip может скрыть несколько устройст, как понять кому отдать ответ)

Допусим есть 2 устройства:
роутер создает пары (обоим железкам - один адрес, но сохраняет адрес порта и по нему индентифирует устройство)
192.168.1.2:49273 -> 1.1.1.1:49273
192.168.1.2:32136 -> 1.1.1.1:32136
 

VLAN
НА ЛИСТОЧКЕ

Пакеты Ipv4 ipv6

Версия, размер заголовка, тип сервиса, размер пакета, 
ID пакета, флаги, Смещение фрагмента
Время жизни, Протокол, Контрольная сумма заголовка,
IP-адрес источника,
IP-адрес назначения,
Опции (если размер заголовка > 5),
Данные
![alt text](image.png)

**Размер заголовка**
Минимальное значение равно 5 (5×32=160 бит, 20 байт), максимальное — 15 (60 байт).
**Тип сервиса**
для обеспечения качества обслуживания QoS/

Описание типа сервиса:

P P P D T R ECN
PPP - биты приоритета трафика (3 очереди в зависимоти от приоритета. Есть несолько алгоритмов обработки очередей: обработка очередей по очереди или процентное соотношение по прередаче)
D - задержка, если он выставлен то надо передать трафик по маршруту с минимальными задержками
T - пропускная способность (реальная а не максимальная заявленная)
R - надежность
ECN(2 бита) - явное сообщение о задержки

**ID пакета**
отвечает за фрагментацию

одинаков у всех фрагментов фрагментированного пакета

**Флаги**
3 бита
X p3 пн
пн - последний ли данный фрагмент в последовательности

**Смещение фрагмента**
положительное смещение относительно начала пакета, т е



















